{% extends 'base.html' %}

{% block title %}Teachers - {{ settings.school_name if settings else 'Shree Gyan Bharti High School' }}{% endblock %}

{% block inline_css %}
.section-heading { text-align: center; padding: 5px 0; background-color: #0c2d57; color: white; }
.teachers-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; padding: 40px 20px; background: #f9f9f9; justify-items: center; }
.teacher-card { background: white; padding: 20px; border-radius: 10px; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: transform .3s, box-shadow .3s; min-height: 460px; display: flex; flex-direction: column; justify-content: flex-start; max-width: 360px; width: 100%; }
.teacher-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.2); }
.image-container { width: 120px; height: 120px; border: 2px solid black; margin: 0 auto 15px; display: flex; justify-content: center; align-items: center; overflow: hidden; border-radius: 10px; }
.image-container img { width: 100%; height: 100%; object-fit: cover; display:block; }
.teacher-card h3 { color: #0c2d57; margin-bottom: 5px; }
.teacher-card p { font-size: 14px; color: #555; margin: 4px 0; }
.subject-description { margin-top: 15px; font-weight: bold; font-size: 16px; color: #333; padding-top: 10px; border-top: 1px solid #eee; max-height: 120px; overflow: hidden; }
.section { display:flex; align-items:center; padding:60px 20px; background:#fff; border-bottom:1px solid #ddd; min-height: 300px; }
.section .info { max-width: 700px; margin-left: auto; }
.section .info h2 { margin-bottom:10px; color:#0c2d57; }
.section .info h4 { margin-bottom:10px; color:#555; }
.fallback-tile { width:100%; height:100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display:flex; align-items:center; justify-content:center; color:#fff; font-size:2rem; font-weight:bold; }
{% endblock %}

{% block content %}
<div class="section-heading">
  <h2>Meet Our Leadership & Teachers</h2>
</div>

<!-- Leadership: one feature section per leader -->
{% for teacher in leadership %}
<section class="section">
  <div style="width:300px;height:400px;border-radius:10px;overflow:hidden;margin-right:40px;flex-shrink:0;">
    {% if teacher.image_path %}
      <img src="{{ teacher.image_path }}" alt="{{ teacher.name }}" style="width:100%;height:100%;object-fit:cover;display:block;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
    {% endif %}
    <div class="fallback-tile" style="display:{% if teacher.image_path %}none{% else %}flex{% endif %};">
      {{ teacher.name.split()[0][0] }}{{ teacher.name.split()[-1][0] if teacher.name.split()|length > 1 else '' }}
    </div>
  </div>
  <div class="info">
    <h2>{{ teacher.name }}</h2>
    {% if teacher.qualification %}<p><strong>Qualification:</strong> {{ teacher.qualification }}</p>{% endif %}
    {% if teacher.experience %}<p><strong>Experience:</strong> {{ teacher.experience }}</p>{% endif %}
    {% if teacher.subject %}<p><strong>Subject:</strong> {{ teacher.subject }}</p>{% endif %}
    {% if teacher.bio %}<p>{{ teacher.bio }}</p>{% endif %}
  </div>
  
</section>
{% endfor %}

<!-- Teachers Grid -->
<div class="section-heading">
  <h2>Dedicated Teachers</h2>
  <p>Our highly qualified and dedicated teachers are the foundation of our school's success. Their passion for teaching and commitment to student growth is reflected in everything they do.</p>
 </div>

<div class="teachers-grid">
  {% for teacher in teaching %}
  <div class="teacher-card">
    <div class="image-container">
      {% if teacher.image_path %}
      <img src="{{ teacher.image_path }}" alt="{{ teacher.name }}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
      {% endif %}
      <div class="fallback-tile" style="display:{% if teacher.image_path %}none{% else %}flex{% endif %}; font-size: 1.5rem;">
        {{ teacher.name.split()[0][0] }}{{ teacher.name.split()[-1][0] if teacher.name.split()|length > 1 else '' }}
      </div>
    </div>
    <h3>{{ teacher.name }}</h3>
    {% if teacher.qualification %}<p>Qualification: {{ teacher.qualification }}</p>{% endif %}
    {% if teacher.experience %}<p>Experience: {{ teacher.experience }}</p>{% endif %}
    {% if teacher.subject %}<p>Subject: {{ teacher.subject }}</p>{% endif %}
    {% if teacher.bio %}<div class="subject-description">{{ teacher.bio }}</div>{% endif %}
  </div>
  {% endfor %}
</div>
{% endblock %}